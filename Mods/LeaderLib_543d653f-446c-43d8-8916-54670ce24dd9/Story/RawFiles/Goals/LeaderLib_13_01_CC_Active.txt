Version 1
SubGoalCombiner SGC_AND
INITSECTION

KBSECTION

IF
SkillAdded(_Player, _, _)
AND
_Player != NULL_00000000-0000-0000-0000-000000000000
THEN
ProcObjectTimerCancel(_Player, "LeaderLib_Timers_UpdateSelectedPreset");
ProcObjectTimer(_Player, "LeaderLib_Timers_UpdateSelectedPreset", 50);

PROC
ProcObjectTimerFinished((CHARACTERGUID)_Player, "LeaderLib_Timers_UpdateSelectedPreset")
AND
DB_SelectedCC(_Player, _UserProfile)
THEN
SetStoryEvent(_Player, "LeaderLib_CC_SetPreset");

IF
StoryEvent((CHARACTERGUID)_Player, "LeaderLib_Events_OnPresetSet")
AND
CharacterGetReservedUserID(_Player, _UserID)
AND
DB_LeaderLib_CC_Temp_SelectedPreset(_UserID, _Preset)
THEN
NOT DB_LeaderLib_CC_Temp_SelectedPreset(_UserID, _Preset);

IF
StoryEvent((CHARACTERGUID)_Player, "LeaderLib_Events_OnPresetSet")
AND
GetVarFixedString(_Player, "LeaderLib_CharacterCreationPreset", _Preset)
AND
CharacterGetReservedUserID(_Player, _UserID)
THEN
LeaderLog_Log("DEBUG", "[LeaderLib:CC:LeaderLib_Events_OnPresetSet] Player's selected preset [",_Preset,"] in Character Creation.");
DB_LeaderLib_CC_Temp_SelectedPreset(_UserID, _Preset);

IF
RegionEnded(_)
THEN
GoalCompleted;

EXITSECTION

ENDEXITSECTION
ParentTargetEdge "LeaderLib_13_00_CharacterCreation"